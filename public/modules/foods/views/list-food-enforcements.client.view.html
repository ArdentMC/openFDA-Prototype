<section data-ng-controller="FoodsController" >
    <div class="page-header" style="margin-bottom:0">
        <h1>Food Enforcements</h1>
    </div>
    <nav class="navbar navbar-default">
        <div class="navbar-header">
            <a class="navbar-brand" href="">Search By</a>
        </div>
        <div style="width:Calc(100% - 113.047px);position:relative;float:left;display:inline">
            <form name="foodSearchForm" class="navbar-form navbar-left" role="search" style="width:100%" ng-submit="find()">
                <div class="form-group" style="height:100%;margin-right:25px;" ng-class="{ 'has-error' : foodSearchForm.stateDropDown.$invalid && !foodSearchForm.stateDropDown.$pristine }">
                    <input type="text" name="dropdownCode" ng-model="queryObject.state.CODE" hidden required />
                    <div class="dropdown  btn-group" name="stateDropDown">
                        <a id="statedropdownanchor" href="#" data-toggle="dropdown" class="btn dropdown-toggle form-control">{{queryObject.state.DESC}} <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li ng-repeat="state in stateList"  ng-class="{selectedState: isSelected(state)}" ng-cloak=""><a href ng-click="setSelected(state)">{{state.DESC}}</a></li>
                        </ul>
                    </div>
                </div>
                <div class="form-group" style="height:100%;width:270px;padding:0">
                    <input id="startDate" name="startDate" style="width:200px;position:relative;float:left"  type="text" class="form-control" datepicker-popup="{{format}}" placeholder="Start date" ng-model="queryObject.startDate" is-open="startDateOpened" min-date="minDate" max-date="maxDate" datepicker-options="dateOptions" ng-required="true"/>
                    <span class="input-group-btn" style="width:40px;position:relative;float:left;display:inline">
                        <button type="button" class="btn btn-default" ng-click="startDateOpen($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                    </span>
                </div>
                <div class="form-group" style="height:100%;width:270px;padding:0">
                    <input id="endDate" name="endDate" style="width:200px;position:relative;float:left"  type="text" class="form-control" datepicker-popup="{{format}}" placeholder="End date" ng-model="queryObject.endDate" is-open="endDateOpened" min-date="minDate" max-date="maxDate" datepicker-options="dateOptions" ng-required="true"/>
                    <span class="input-group-btn" style="width:40px;position:relative;float:left;display:inline">
                        <button type="button" class="btn btn-default" ng-click="endDateOpen($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                    </span>
                </div>
                <button type="submit"  class="btn btn-default" style="float:right">Submit</button>
            </form>
            <span class="text-danger" ng-show="foodSearchForm.dropdownCode.$error.required">Please select a state.</span>
            <span class="help-block text-danger" ng-show="foodSearchForm.startDate.$invalid && foodSearchForm.startDate.$dirty">
                <span ng-show="foodSearchForm.startDate.$error.required">
                    Start Date is required
                </span>
                <span class="help-block text-danger" ng-show="foodSearchForm.startDate.$invalid && foodSearchForm.startDate.$dirty">
                    Enter a valid start date.
                </span>
          </span>

        </div>
    </nav>
    <div class="container-fluid" style="height:768px; margin:0;padding: 0" data-ng-show="foodEnforcementList.length > 0">
        <div class="tabbable tabs-left"  style="width:20%;height:100%;position: relative; top:0; float:left;overflow-y:scroll;margin-bottom:0;">
            <ul id="foodtab" class="nav nav-pills">
                <li data-ng-repeat="fooditem in foodEnforcementList" ng-class="{active: $index == 0}">
                    <a href="#tab{{$index + 1}}" data-toggle="tab" class="list-group-item">
                        <small class="list-group-item-text">
                        Recall Number:
                        <span data-ng-bind="fooditem.recall_number"></span><br/>
                        Report date:
                        <span data-ng-bind="fooditem.report_date | date:'yyyy-MM-dd'"></span><br/>
                        Product Type:
                        <span data-ng-bind="fooditem.product_type"></span><br/>
                        Product Item:<br/>
                        <b><span class="list-group-item-text" data-ng-bind="fooditem.product_description"></span></b>
                        </small>
                    </a>
                </li>
            </ul>
        </div>
        <div class="tab-content"  style="height: 100%;width:80%;float:left;position:relative; padding: 10px;display:inline;" >
            <div class="tab-pane" id="tab{{$index + 1}}" data-ng-repeat="fooditem in foodEnforcementList" ng-class="{active: $index == 0}">
                <h4><b>{{fooditem.voluntary_mandated}} Product Recall</b></h4>
                <p class="list-group-item-text" data-ng-bind="fooditem.reason_for_recall"></p><br/>
                <p class="list-group-item-text"><b>Product Packaging/Code: </b>{{fooditem.code_info}}</p>
                <p class="list-group-item-text"><b>Affected States and Countries: </b>{{fooditem.distribution_pattern}}</p>
                <p class="list-group-item-text"><b>Affected Quantity: </b>{{fooditem.product_quantity}}</p>
                <p class="list-group-item-text"><b>Recalling Firm: </b>{{fooditem.recalling_firm}} of {{fooditem.city}}, {{fooditem.state}}, {{fooditem.country}}</p>
                <p class="list-group-item-text"><b>Recall Date: </b>{{fooditem.recall_initiation_date | date:'yyyy-MM-dd'}}</p>
                <p class="list-group-item-text"><b>Recall Status: </b>{{fooditem.status}}</p>
            </div>
        </div>
    </div>
</section>